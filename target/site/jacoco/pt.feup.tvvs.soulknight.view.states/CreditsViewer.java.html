<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CreditsViewer.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Soul Knight</a> &gt; <a href="index.source.html" class="el_package">pt.feup.tvvs.soulknight.view.states</a> &gt; <span class="el_source">CreditsViewer.java</span></div><h1>CreditsViewer.java</h1><pre class="source lang-java linenums">package pt.feup.tvvs.soulknight.view.states;

import pt.feup.tvvs.soulknight.gui.GUI;
import pt.feup.tvvs.soulknight.model.credits.Credits;
import pt.feup.tvvs.soulknight.view.menu.LogoViewer;
import pt.feup.tvvs.soulknight.view.sprites.ViewerProvider;
import pt.feup.tvvs.soulknight.view.text.TextViewer;
import com.googlecode.lanterna.TextColor;

import java.io.IOException;

import static pt.feup.tvvs.soulknight.view.text.GameTextViewer.*;

public class CreditsViewer extends ScreenViewer&lt;Credits&gt; {
    private final TextViewer textViewer;
    private final LogoViewer logoViewer;

    public CreditsViewer(Credits model, ViewerProvider viewerProvider) {
<span class="fc" id="L19">        super(model);</span>
<span class="fc" id="L20">        this.textViewer = viewerProvider.getTextViewer();</span>
<span class="fc" id="L21">        this.logoViewer = viewerProvider.getLogoViewer();</span>
<span class="fc" id="L22">    }</span>

<span class="fc" id="L24">    public static final TextColor messageColor = new TextColor.RGB(25, 25, 25);</span>
<span class="fc" id="L25">    public static final TextColor nameColor = new TextColor.RGB(15,22,25);</span>
<span class="fc" id="L26">    public static final TextColor scoreColor = new TextColor.RGB(40,55,130);</span>
<span class="fc" id="L27">    public static final TextColor deathColor = new TextColor.RGB(45,65,140);</span>
<span class="fc" id="L28">    public static final TextColor timeColor = new TextColor.RGB(49,75,155);</span>

    @Override
    public void draw(GUI gui, long frameCount) throws IOException {
<span class="fc" id="L32">        gui.cls();</span>
<span class="fc" id="L33">        drawSmoothColorfulBackground(gui, frameCount);</span>
<span class="fc" id="L34">        drawMessages(gui);</span>
<span class="fc" id="L35">        drawNames(gui);</span>
<span class="fc" id="L36">        drawScore(gui);</span>
<span class="fc" id="L37">        drawDeaths(gui);</span>
<span class="fc" id="L38">        drawDuration(gui);</span>
<span class="fc" id="L39">        logoViewer.draw(gui, 60, 16);</span>
<span class="fc" id="L40">        gui.flush();</span>
<span class="fc" id="L41">    }</span>

    private void drawMessages(GUI gui) {
<span class="fc" id="L44">        int xAlignment = 72;</span>
<span class="fc" id="L45">        int yAlignment = 6;</span>
<span class="fc" id="L46">        int spacing = getCharHeight() * 8;</span>
<span class="fc bfc" id="L47" title="All 2 branches covered.">        for (int idx = 0; idx &lt; getModel().getMessages().length ; idx++){</span>
<span class="fc" id="L48">            String message = getModel().getMessages()[idx];</span>
<span class="fc" id="L49">            textViewer.draw(message,</span>
                    xAlignment,
                    yAlignment + spacing * idx,
                    messageColor, gui);
        }

<span class="fc" id="L55">    }</span>

    private void drawNames(GUI gui) {
<span class="fc" id="L58">        int xAlignment = 118;</span>
<span class="fc" id="L59">        int yAlignment = 60;</span>
<span class="fc" id="L60">        int spacing = getCharHeight() * 2;</span>
<span class="fc bfc" id="L61" title="All 2 branches covered.">        for (int idx = 0; idx &lt; getModel().getNames().length ; idx++){</span>
<span class="fc" id="L62">            textViewer.draw(getModel().getNames()[idx],</span>
                    xAlignment,
                    yAlignment + spacing * idx,
                    nameColor, gui);
        }
<span class="fc" id="L67">    }</span>

    private void drawScore(GUI gui) {
<span class="fc" id="L70">        int xAlignment = 10;</span>
<span class="fc" id="L71">        int yAlignment = 70;</span>
<span class="fc" id="L72">        textViewer.draw(&quot;Score:  &quot; + String.format(&quot;%1$&quot; + 2 + &quot;s&quot;, getModel().getScore()).replace(' ', '0'),</span>
                xAlignment,
                yAlignment,
                scoreColor, gui);
<span class="fc" id="L76">    }</span>

    private void drawDeaths(GUI gui) {
<span class="fc" id="L79">        int xAlignment = 10;</span>
<span class="fc" id="L80">        int yAlignment = 80;</span>
<span class="fc" id="L81">        textViewer.draw(&quot;Deaths: &quot; + String.format(&quot;%1$&quot; + 2 + &quot;s&quot;, getModel().getDeaths()).replace(' ', '0'),</span>
                xAlignment,
                yAlignment,
                deathColor, gui);
<span class="fc" id="L85">    }</span>


    private void drawDuration(GUI gui) {
<span class="fc" id="L89">        int xAlignment = 10;</span>
<span class="fc" id="L90">        int yAlignment = 90;</span>
<span class="fc" id="L91">        textViewer.draw(</span>
                &quot;Time:   &quot;
<span class="fc" id="L93">                        + String.format(&quot;%1$&quot; + 2 + &quot;s&quot;, getModel().getMinutes()).replace(' ', '0')</span>
<span class="fc" id="L94">                        + &quot;:&quot; + String.format(&quot;%1$&quot; + 2 + &quot;s&quot;, getModel().getSeconds()).replace(' ', '0'),</span>
                xAlignment,
                yAlignment,
                timeColor, gui
        );
<span class="fc" id="L99">    }</span>

    private void drawSmoothColorfulBackground(GUI gui, long time) throws IOException {
<span class="fc" id="L102">        int screenWidth = 184;</span>
<span class="fc" id="L103">        int screenHeight = 112;</span>
<span class="fc" id="L104">        double changeRate = 0.05;</span>

        // Smooth gradient generation with grayscale tone and hints of color
<span class="fc bfc" id="L107" title="All 2 branches covered.">        for (int w = 0; w &lt; screenWidth; w++) {</span>
<span class="fc bfc" id="L108" title="All 2 branches covered.">            for (int h = 0; h &lt; screenHeight; h++) {</span>
                // Create a base grayscale value
<span class="fc" id="L110">                double distance = Math.sqrt(Math.pow((double) w / screenWidth - 0.5, 2) + Math.pow((double) h / screenHeight - 0.5, 2));</span>
<span class="fc" id="L111">                int gray = (int) (180 + 75 * Math.sin(time * changeRate + distance * Math.PI * 4));</span>

                // Add subtle color variations
<span class="fc" id="L114">                int red = (int) (gray + 20 * Math.sin((double) w / screenWidth * 2 * Math.PI + time * changeRate));</span>
<span class="fc" id="L115">                int green = (int) (gray + 15 * Math.sin((double) h / screenHeight * 2 * Math.PI + time * changeRate + Math.PI / 3));</span>
<span class="fc" id="L116">                int blue = (int) (gray + 25 * Math.sin((double) w / screenWidth * 2 * Math.PI + time * changeRate + 2 * Math.PI / 3));</span>

                // Clamp values to ensure RGB stays within bounds
<span class="fc" id="L119">                red = Math.min(255, Math.max(0, red));</span>
<span class="fc" id="L120">                green = Math.min(255, Math.max(0, green));</span>
<span class="fc" id="L121">                blue = Math.min(255, Math.max(0, blue));</span>

<span class="fc" id="L123">                TextColor.RGB smoothGradientColor = new TextColor.RGB(red, green, blue);</span>

                // Draw each pixel
<span class="fc" id="L126">                gui.drawPixel(w, h, smoothGradientColor);</span>
            }
        }

        // Add a subtle border effect to make the visuals stand out
<span class="fc" id="L131">        TextColor.RGB borderColor = new TextColor.RGB(80, 80, 80); // Darker grayscale border</span>
<span class="fc bfc" id="L132" title="All 2 branches covered.">        for (int w = 0; w &lt; screenWidth; w++) {</span>
<span class="fc" id="L133">            gui.drawPixel(w, 0, borderColor);</span>
<span class="fc" id="L134">            gui.drawPixel(w, screenHeight - 1, borderColor);</span>
        }
<span class="fc bfc" id="L136" title="All 2 branches covered.">        for (int h = 1; h &lt; screenHeight - 1; h++) {</span>
<span class="fc" id="L137">            gui.drawPixel(0, h, borderColor);</span>
<span class="fc" id="L138">            gui.drawPixel(screenWidth - 1, h, borderColor);</span>
        }
<span class="fc" id="L140">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.13.202504020838</span></div></body></html>